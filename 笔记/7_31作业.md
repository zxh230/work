##### 要求：
1、在namespace default中使用Deployment部署pod 3个运行nginx，使用service 端口映射到clusterIP的8080端口
2、在namespace devtest中 使用Statefulset部署pod 3个 运行PHP，使用service 的clusterIP访问
3、在namespace opstest中，使用Statefulset部署pod 1个运行mysql
访问nginx的service的clusterIP地址，可以打开index.php的测试页面，及mysql的链接测试
******
```shell
# 创建作业目录
mkdir lnmp
cd lnmp
# 编写mysql.yaml文件







Mysql> create user 'root'@'%.%.%.%' identified by '123. Com';
Query OK, 0 rows affected (0.01 sec)

Mysql> grant all on *.* to 'root'@'%.%.%.%';
Query OK, 0 rows affected (0.01 sec)














kubectl-infopod 脚本插件
替换或更改即可
```shell
#!/bin/bash
show_usage() {
    echo "使用方法:"
    echo "  kubectl infopod                     # 查询当前namespace的pods"
    echo "  kubectl infopod <pod_name>          # 查询匹配的pod"
    echo "  kubectl infopod <namespace_name>    # 查询指定namespace的pods"
    echo "  kubectl infopod ... -w              # 持续监视模式"
}

query_pods() {
    local query=$1
    local watch=$2
    local namespaces=$(kubectl get namespaces -o jsonpath='{.items[*].metadata.name}')
    local watch_flag=""
    
    if [ "$watch" = "true" ]; then
        watch_flag="-w"
    fi
    
    # 检查是否是namespace
    if echo $namespaces | grep -w -q "$query"; then
        echo "在该namespace中的pod: $query"
        kubectl get pod -n "$query" $watch_flag -o custom-columns=NAME:.metadata.name,IP:.status.podIP,STATUS:.status.phase,NODE:.spec.nodeName,IMAGE:.spec.containers[0].image
    else
        # 在所有namespace中查找匹配的pod
        local found=false
        for ns in $namespaces; do
            if kubectl get pod -n "$ns" "$query" &>/dev/null; then
                echo "Pod found in namespace: $ns"
                kubectl get pod -n "$ns" "$query" $watch_flag -o custom-columns=NAME:.metadata.name,IP:.status.podIP,STATUS:.status.phase,NODE:.spec.nodeName,IMAGE:.spec.containers[0].image
                found=true
                break
            fi
        done
        
        if [ "$found" = false ]; then
            echo "没有任何匹配的pod: $query"
            show_usage
        fi
    fi
}

watch_mode=false
args=()

# 解析参数
for arg in "$@"; do
    if [ "$arg" = "-w" ]; then
        watch_mode=true
    else
        args+=("$arg")
    fi
done

if [ ${#args[@]} -eq 0 ]; then
    # 无参数，查询当前namespace的pods
    kubectl get pod $([[ "$watch_mode" = true ]] && echo "-w") -o custom-columns=NAME:.metadata.name,IP:.status.podIP,STATUS:.status.phase,NODE:.spec.nodeName,IMAGE:.spec.containers[0].image
elif [ ${#args[@]} -eq 1 ]; then
    # 有一个参数，查询匹配的pod或namespace
    query_pods "${args[0]}" "$watch_mode"
else
    # 参数不正确，显示使用方法
    show_usage
    exit 1
fi
```