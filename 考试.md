```shell
cat >> one.yaml << EOF
apiVersion: v1
kind: ConfigMap
metadata:
  name: php-conf
data:
  www.conf: |
    ; Unix user/group of processes
    user = www-data
    group = www-data

    ; The address on which to accept FastCGI requests
    listen = 0.0.0.0:9000

    ; Set the process manager
    pm = dynamic

    ; The number of child processes to be created when pm is set to static and the maximum number of
    ; child processes to be created when pm is set to dynamic or ondemand.
    pm.max_children = 5

    ; The number of child processes created on startup.
    pm.start_servers = 2

    ; The minimum number of idle processes.
    pm.min_spare_servers = 1

    ; The maximum number of idle processes.
    pm.max_spare_servers = 3
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: html-php
data:
  index.php: |
    <?php
    error_reporting(E_ALL);
    ini_set('display_errors', 1);

    $db_host = '10.15.200.243';
    $db_name = 'zxh';
    $db_user = 'root';
    $db_pass = '123.com';

    echo "Attempting to connect to: $db_host:$db_port<br>";

    try {
        $dsn = "mysql:host=$db_host;port=$db_port;dbname=$db_name";
        $options = array(
            PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
            PDO::ATTR_TIMEOUT => 5, // 设置连接超时
        );
        $dbh = new PDO($dsn, $db_user, $db_pass, $options);
        echo '非常开心，数据库连接成功！！！<br>';
    } catch (PDOException $e) {
        echo '恭喜恭喜，数据库连接失败~~~<br>';
        echo '错误信息： ' . $e->getMessage() . '<br>';
        echo '错误代码： ' . $e->getCode() . '<br>';
    }
    phpinfo();
    ?>
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: php-pod
spec:
  replicas: 3
  selector:
    matchLabels:
      app: php
  template:
    metadata:
      labels:
        app: php
    spec:
      containers:
      - name: php
        image: php:8.1-fpm
        imagePullPolicy: IfNotPresent
        ports:
        - containerPort: 9000
        command: ["/bin/sh"]
        args:
        - "-c"
        - |
          docker-php-ext-install mysqli pdo pdo_mysql && \
          mkdir -p /usr/share/nginx/html && \
          php-fpm
        volumeMounts:
        - name: html
          mountPath: /usr/share/nginx/html/
        - name: conf
          mountPath: /usr/local/etc/php-fpm.d/www.conf
          subPath: www.conf
      volumes:
      - name: html
        configMap:
          name: html-php
      - name: conf
        configMap:
          name: php-conf
---
apiVersion: v1
kind: Service
metadata:
  name: phpsvc
spec:
  type: ClusterIP
  clusterIP: 10.100.0.1
  selector:
    app: php
  ports:
    - port: 9000
      targetPort: 9000
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-conf
data:
  aaa.conf: |
    server {
      listen 80;
      server_name www.zxh.com;
      root /usr/share/nginx/html;
      index index.php index.html index.htm;

      location ~ \.php$ {
        fastcgi_pass 10.100.0.1:9000;
        fastcgi_index index.php;
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
      }
    }
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:latest
        ports:
        - containerPort: 80
        volumeMounts:
        - name: nginx-config
          mountPath: /etc/nginx/conf.d
        - name: nginx-html
          mountPath: /usr/share/nginx/html
      volumes:
      - name: nginx-config
        configMap:
          name: nginx-conf
      - name: nginx-html
        configMap:
          name: html-php
---
apiVersion: v1
kind: Service
metadata:
  name: nginxsvc
spec:
  selector:
    app: nginx
  ports:
    - port: 9090
      targetPort: 80
  type: ClusterIP
---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: web-ingress
spec:
  ingressClassName: nginx
  rules:
  - http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: nginxsvc
            port: 
              number: 80
EOF
```